{"version":3,"sources":["components.js","react_articles.js","react_categories.js","react_category_refact.js","react_labels.js","react_photos.js"],"names":["ConfirmDialog","React","Component","constructor","props","handleConfirmClick","bind","handleCancelClick","e","confirm","cancel","render","styles","visible","display","title","TableNavLinkLi","handleClick","click","page","classes","current","TableNavLink","getRenderData","pg","pagechange","total","start","len","lis","push","i","MoveGroupDialog","handleGroupChange","state","newgroup","radio","target","checked","setState","value","groupItems","categories","map","group","id","name","FilterInput","handleChange","which","change","label","FilterSelect","options","opt","reset","ArticleTableLabel","handleCheckStateChange","allChecked","stopPropagation","allCheckState","ArticleRow","article_state_label","on","off","handleStateClick","article_operation","article","type","getAttribute","checkStateChange","url","topStatus","top","color","articleState","operation","handleIndexClick","index","category","pageview","ArticleTable","articleStateChange","delete","location","href","handleMoveCategory","that","articles","checkState","articleRows","arr","ArticleLayout","delVisible","delArticleId","moveVisible","moveArticleId","isgroup","stateOptions","opeOptions","addArticle","articleGroupChange","handlePageChange","handleFilterChange","handleDeleteArticle","deleteArticleConfirm","deleteArticleCancel","fetchArticles","fetchSingleArticle","fetchCategories","groupOpeChange","moveCategoryConfirm","moveCategoryCancel","filter","$","ajax","data","dataType","success","dt","error","console","log","gid","code","length","ids","key","join","groupopeReset","adminArticlesInit","ReactDOM","document","getElementById","OperationBar","addNewCategory","AddCategoryDiv","valueChange","addCategoryCancel","addCategoryConfirm","preventDefault","nameInput","parent","parentSelect","descp","descpArea","categoryItems","height","opacity","input","select","textarea","CategoryLabel","CategoryRow","categoryOperationClick","categoryOrderChange","categoryOrderKeyDown","parentNode","modify","order","handleCategoryOrderChange","updateCategoryOrder","operationUl","mainorder","articlecnt","CategoryTable","CategoryLayout","addVisible","addType","addData","addTitle","add","addCategoryDivStateChange","addCategoryDivValueChange","addCategoryDivConfirm","addCategoryDivCancel","handleDeleteClick","deleteCategoryConfirm","deleteCategoryCancel","fetchCategoryDatas","delCategoryId","localStorage","setItem","JSON","stringify","adminCategoriesInit","DetailArea","articleOrderChange","handleKeyDown","prefaceButtonClicked","orderChange","isSet","prefaceChange","opeArea","suborder","ArticleItemLi","onItemClicked","cid","depth","articleClass","articleId","CategoryItemLi","expandChange","handleCategoryClick","content","childs","child","categoryId","cstate","titleClass","articlesUlStyle","titleImage","CategoryTree","tree","ReformArea","Number","pathname","match","detail","categoryPrefaceChange","categoryExpandChange","__getReactDetail","getReactDetail","getCategoryTree","newOrder","update","preface","root","tid","dt1","aid","cb","adminCategoryRefactInit","Date","prototype","format","fmt","o","getMonth","getDate","getHours","getMinutes","getSeconds","Math","floor","getMilliseconds","test","replace","RegExp","$1","getFullYear","substr","k","LabelTableLabel","orderState","asc","imgsrc","desc","handleOrderImgClick","orderby","orderDirect","targetsrc","othersrc","LabelRow","addtime","hotmark","LabelTable","labels","LabelLayout","handleOrderChange","fetchLabelData","returnData","adminLabelsInit","InputDialog","val","textInput","MovePhotoGroupDialog","groups","getItem","parse","PhotoFlowOperationBar","handleUploadButtonClick","handleUploadInputChange","hideMoveDialog","hideDelDialog","handleMoveConfirm","handleMoveCancel","handleDelConfirm","handleDelCancel","moveButtonClick","delButtonClick","handleAllCheckChanged","uploadInput","new_gid","handleMoveChecked","handleDeleteChecked","uploadInputStyles","PhotoItem","inputVisible","handlePhotoCheck","showInputDialog","hideInputDialog","showMoveDialog","showDelDialog","handleInputConfirm","handleInputCancel","photoOnLoad","handleCheckChange","rename","photo","movegroup","delphoto","img","a","Image","src","sw","width","sh","min","scale","nw","nh","style","photoSrc","PhotoFlow","photos","moveGroup","moveSingleGroup","renamePhoto","deletePhotos","deleteSinglePhoto","getSinglePhoto","getGroupPhotos","forEach","handleRefetch","file","files","fd","FormData","append","err","items","PhotoGroupItem","handleGroupItemClick","handleDeleteGroup","handleRenameGroup","opeImgStyles","opeImgVisible","imgSrc","count","PhotoGroupBar","handleConfirm","handleCancel","showAddDialog","fetchGroupData","toggleOpeImgState","groupname","groupChange","previous","opebarImg","getTime","PhotoArea","handlePhotoGroupChange","adminPhotosInit"],"mappings":"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","file":"all.js","sourcesContent":["class ConfirmDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleConfirmClick = this.handleConfirmClick.bind(this);\n    this.handleCancelClick = this.handleCancelClick.bind(this);\n  }\n  handleConfirmClick(e) {\n    this.props.confirm();\n  }\n  handleCancelClick(e) {\n    this.props.cancel();\n  }\n  render() {\n    var styles = {};\n    if (!this.props.visible) styles.display = 'none';\n    return (\n      <div className = 'dialog-div del-dialog' style = {styles}>\n        <div className = 'dialog-header-div'>\n\t  <div className = 'dialog-title-div'>{this.props.title}</div>\n        </div>\n        <div className = 'dialog-bottom-operation-bar'>\n\t  <button className = 'dialog-operation-button dialog-confirm-button' onClick = {this.handleConfirmClick}>确定</button>\n\t  <button className = 'dialog-operation-button dialog-cancel-button' onClick = {this.handleCancelClick}>取消</button>\n        </div>\n      </div>\n    );\n  }\n}\nclass TableNavLinkLi extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleClick = this.handleClick.bind(this);\n  }\n  handleClick() {\n    this.props.click(this.props.page);\n  }\n  render() {\n    var classes = 'table-nav-ul-li';\n    if (this.props.current == this.props.page) classes += ' table-nav-ul-li-current';\n    return (\n      <li className = {classes} onClick = {this.handleClick}>{this.props.title}</li>\n    );\n  }\n}\nclass TableNavLink extends React.Component {\n  constructor(props) {\n    super(props);\n    this.getRenderData = this.getRenderData.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n  }\n  handleClick(pg) {\n    this.props.pagechange(pg);\n  }\n  getRenderData() {\n    const page = this.props.page;\n    const total = this.props.total;\n    var start = page < 5 ? 0 : page - 5;\n    var len;\n    if (start + 10 <= total) {\n      len = 10;\n    } else if (total - 10 > 0) {\n      start = total - 10;\n      len = 10;\n    } else {\n      start = 0;\n      len = total;\n    }\n    var lis = [];\n    if (page != 0) lis.push(<TableNavLinkLi page = {page - 1} current = {page} title='上一页' click = {this.handleClick} />);\n    for (let i = 1; i <= len; i++)\n      lis.push(<TableNavLinkLi page = {start + i - 1} current = {page} title= {start + i} click = {this.handleClick} />);\n    if (page + 1 < total) lis.push(<TableNavLinkLi page = {page + 1} current = {page} title = '下一页' click = {this.handleClick} />);\n    return lis;\n  }\n  render() {\n    const lis = this.getRenderData();\n    return (\n      <ul id = 'table-nav-ul'>\n        {lis}\n      </ul>\n    );\n  }\n}","class MoveGroupDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleConfirmClick = this.handleConfirmClick.bind(this);\n    this.handleCancelClick = this.handleCancelClick.bind(this);\n    this.handleGroupChange = this.handleGroupChange.bind(this);\n    this.state = {\n      newgroup : -1\n    };\n  }\n  \n  handleConfirmClick(e) {\n    this.props.confirm(this.state.newgroup);\n  }\n  \n  handleCancelClick(e) {\n    this.props.cancel();\n  }\n\n  handleGroupChange(e) {\n    var radio = e.target;\n    if (radio.checked) {\n      this.setState({\n        newgroup: radio.value\n      });\n    }\n  }\n\n  render() {\n    var styles = {};\n    if (!this.props.visible) styles.display = 'none';\n    var groupItems = this.props.categories.map((group) => {\n      if (group.id == -1) return '';\n      return (\n        <li className = 'move-group-radio-li'>\n\t  <input type = 'radio' name = 'photogroup' value = {group.id} onChange = {this.handleGroupChange}/>\n\t  <label>{group.name}</label>\n        </li>\n      );\n    });\n    return (\n      <div className = 'dialog-div option-dialog move-category-dialog' style = {styles}>\n        <div className = 'dialog-main-body-div'>\n\t  <ul id = 'move-group-radio-ul'>\n\t    {groupItems}\n\t  </ul>\n        </div>\n        <div className = 'dialog-bottom-operation-bar'>\n\t  <button className = 'dialog-operation-button dialog-confirm-button' onClick = {this.handleConfirmClick}>确定</button>\n\t  <button className = 'dialog-operation-button dialog-cancel-button' onClick = {this.handleCancelClick}>取消</button>\n        </div>\n      </div>\n    );\n  }\n}\nclass FilterInput extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleChange = this.handleChange.bind(this);\n  }\n  handleChange(e) {\n    if (e.which == 13) {\n      var title = this.props.title;\n      var value = e.target.value;\n      this.props.change(title, value);\n    }\n  }\n  render() {\n    return (\n      <div className = 'table-filter-item'>\n        <label className = 'table-filter-item-label'>{this.props.label}</label>\n        <input className = 'table-filter-item-input' onKeyDown = {this.handleChange} />\n      </div>\n    );\n  }\n  }\nclass FilterSelect extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleChange = this.handleChange.bind(this);\n  }\n  handleChange(e) {\n    var title = this.props.title;\n    var value = e.target.value;\n    this.props.change(title, value);\n  }\n  render() {\n    const options = this.props.options.map((opt) => {\n      if (this.props.reset == true && opt.value == -1) {\n        return <option value = {opt.value} selected = 'selected'>{opt.title}</option>\n      } else {\n        return <option value = {opt.value}>{opt.title}</option>\n      }\n    });\n    return (\n      <div className = 'table-filter-item'>\n        <label className = 'table-filter-item-label'>{this.props.label}</label>\n        <select className = 'table-filter-item-select' onChange = {this.handleChange} >\n\t  {options}\n        </select>\n      </div>\n    );\n  }\n}\nclass ArticleTableLabel extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleCheckStateChange = this.handleCheckStateChange.bind(this);\n  }\n  handleCheckStateChange(e) {\n    this.props.allChecked(e.target.checked);\n    e.stopPropagation();\n  }\n  render() {\n    var checked = this.props.allCheckState == true ? 'checked': '';\n    return (\n      <tr className='content-row-label'>\n        <th className='content-row-check-label'><input type='checkbox' checked = {checked} onChange = {this.handleCheckStateChange}/></th>\n        <th className='content-row-index-label'>序号</th>\n        <th className='content-row-title-label'>标题</th>\n        <th className='content-row-category-label'>类别</th>\n        <th className='content-row-label-label'>标签</th>\n        <th className='content-row-status-label'>状态</th>\n        <th className='content-row-pageview-label'>阅读次数</th>\n        <th className='content-row-operation-label'>操作</th>\n      </tr>\n    );\n  }\n}\nclass ArticleRow extends React.Component {\n  constructor(props) {\n    super(props);\n    this.article_state_label = {\n      on: '已上线',\n      off: '已下线'\n    };\n    this.handleStateClick = this.handleStateClick.bind(this);\n    this.handleCheckStateChange = this.handleCheckStateChange.bind(this);\n    this.article_operation = {\n      on: <ul className='article-operation-ul'><li data-type='off' onClick = {this.handleStateClick}>下线</li><li data-type='check' onClick = {this.handleStateClick}>核查</li></ul>,\n      off: <ul className='article-operation-ul'><li data-type='on' onClick = {this.handleStateClick}>上线</li><li data-type='move' onClick = {this.handleStateClick}>移动</li><li data-type='check' onClick = {this.handleStateClick}>核查</li><li data-type='del' onClick = {this.handleStateClick}>删除</li></ul>\n    }\n  }\n  handleStateClick(e) {\n    var id = this.props.article.id;\n    var type = e.target.getAttribute('data-type');\n    this.props.handleStateClick(id, type);\n  }\n  handleCheckStateChange(e) {\n    var id = this.props.article.id;\n    var checked = e.target.checked;\n    this.props.checkStateChange(id, checked);\n  }\n  render() {\n    var article = this.props.article;\n    const url = '/articles/view/' + article.id;\n    const topStatus = article.top == 0 ? {} : {color: '#EF5350'};\n    const articleState = this.article_state_label[article.state];\n    const operation = this.article_operation[article.state];\n    const checked = this.props.checked === true ? 'checked' : '';\n    return (\n      <tr className='content-row-data'>\n        <td className='content-row-checkbox-data'><input type='checkbox' checked = {checked} onChange = {this.handleCheckStateChange}/></td>\n        <td className='content-row-index-data' onClick = {this.handleIndexClick}>{this.props.index + 1}</td>\n        <td className='content-row-title-data' style={topStatus}><a href={url}>{article.title}</a></td>\n        <td className='content-row-category-data'>{article.category}</td>\n        <td className='content-row-label-data'>{article.label}</td>\n        <td className='content-row-status-data'>{articleState}</td>\n        <td className='content-row-pageview-data'>{article.pageview}</td>\n        <td className='content-row-operation-data'>{operation}</td>\n      </tr>\n    );\n  }\n}\nclass ArticleTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.allChecked = this.allChecked.bind(this);\n    this.handleStateClick = this.handleStateClick.bind(this);\n    this.checkStateChange = this.checkStateChange.bind(this);\n  }\n  allChecked(checked) {\n    this.props.allChecked(checked);\n  }\n  handleStateClick(id, type) {\n    if (type == 'on' || type == 'off') {\n      this.props.articleStateChange(id, type);\n    } else if (type == 'del') {\n      this.props.delete(id);\n    } else if (type == 'check') {\n      location.href = `/admin/articles/modify?id=${id}`;\n    } else if (type == 'move') {\n      this.props.handleMoveCategory(id);\n    }\n  }\n  checkStateChange(id, checked) {\n    this.props.checkStateChange(id, checked);     \n  }\n  render() {\n    var that = this;\n    var articles = this.props.articles;\n    var checkState = this.props.checkState;\n    var allCheckState = true;\n    for (var article of articles) {\n      if (checkState[article.id] !== true) {\n        allCheckState = false;\n        break;\n      }\n    }\n    const articleRows = articles.map((article, index, arr) => {\n      var checked = checkState[article.id];\n      return (\n        <ArticleRow key = {index} index = {index} checked = {checked} article = {article} handleStateClick = {this.handleStateClick} checkStateChange = {this.checkStateChange} />\n      );\n    });\n    return (\n      <table className='content-table'>\n        <thead>\n\t  <ArticleTableLabel allCheckState = {allCheckState} allChecked = {this.allChecked}/>\n        </thead>\n        <tbody>\n\t  { articleRows }\n        </tbody>\n        <tfoot>\n        </tfoot>\n      </table>\n    );\n  }\n}\nclass ArticleLayout extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      articles: [],\n      current: 0,\n      total: 0,\n      checkState: {},\n      // delete dialog\n      delVisible: false,\n      delArticleId: -1,\n      // move dialog\n      moveVisible: false,\n      categories: [],\n      moveArticleId: -1,\n      // group operation\n      isgroup: false\n    }\n    this.stateOptions = [\n      {value: '-1', title: '全部'},\n      {value: 'on', title: '已上线'},\n      {value: 'off', title: '已下线'}\n    ];\n    this.opeOptions = [\n      {value: '-1', title: '--选择操作--'},\n      {value: 'on', title: '上线'},\n      {value: 'off', title: '下线'},\n      {value: 'move', title: '移动'},\n      {value: 'del', title: '删除'}\n    ];\n    this.addArticle = this.addArticle.bind(this);\n    this.articleStateChange = this.articleStateChange.bind(this);\n    this.articleGroupChange = this.articleGroupChange.bind(this);\n    this.allChecked = this.allChecked.bind(this);\n    this.checkStateChange = this.checkStateChange.bind(this);\n    this.handlePageChange = this.handlePageChange.bind(this);\n    this.handleFilterChange = this.handleFilterChange.bind(this);\n    this.handleDeleteArticle = this.handleDeleteArticle.bind(this);\n    this.deleteArticleConfirm = this.deleteArticleConfirm.bind(this);\n    this.deleteArticleCancel = this.deleteArticleCancel.bind(this);\n    this.fetchArticles = this.fetchArticles.bind(this);\n    this.fetchSingleArticle = this.fetchSingleArticle.bind(this);\n    this.fetchCategories = this.fetchCategories.bind(this);\n    this.groupOpeChange = this.groupOpeChange.bind(this);\n    // categories\n    this.moveCategoryConfirm = this.moveCategoryConfirm.bind(this);\n    this.moveCategoryCancel = this.moveCategoryCancel.bind(this);\n    this.handleMoveCategory = this.handleMoveCategory.bind(this);\n  \n    this.filter = {start : 0};\n    this.fetchArticles();\n    this.fetchCategories();\n  }\n  addArticle() {\n    location.href = '/admin/articles/add';\n  }\n  articleStateChange(id, type, isgroup = false) {\n    var that = this;\n    $.ajax({\n      url: '/admin/datas/articles/state',\n      data: {id: id, state: type},\n      type: 'get',\n      dataType: 'json',\n      success: function(dt) {\n        if (isgroup) {\n          that.fetchArticles();\n        } else {\n          that.fetchSingleArticle(id);\n        }\n      },\n      error: function() {\n        console.log(error);\n      }\n    });\n  }\n  articleGroupChange(id, gid, isgroup = false) {\n    var that = this;\n    $.ajax({\n      url: '/admin/datas/articles/move',\n      data: {id: id, gid: gid},\n      type: 'get',\n      dataType: 'json',\n      success: function(dt) {\n        if (dt.code == 0) {\n          if (that.state.isgroup) {\n            that.fetchArticles();\n            that.setState({\n              moveVisible: false,\n              moveArticleId: -1,\n              isgroup: false\n            })\n          } else {\n            that.setState({\n              moveVisible: false,\n              moveArticleId: -1\n            })\n            that.fetchSingleArticle(id);\n          }\n        }\n      }\n    })\n  }\n  checkStateChange(id, checked) {\n    var checkState = this.state.checkState;\n    checkState[id] = checked;\n    this.setState({\n      checkState: checkState\n    })\n  }\n  allChecked(checked) {\n    var articles = this.state.articles;\n    var checkState = {};\n    for (let i = 0; i < articles.length; i++) {\n      checkState[articles[i].id] = checked;\n    }\n    this.setState({\n      checkState: checkState\n    })\n  }\n  fetchSingleArticle(id) {\n    var that = this;\n    $.ajax({\n      url: '/admin/datas/articles/get',\n      type: 'get',\n      data: {id: id},\n      dataType: 'json',\n      success: function(dt) {\n        if (dt.code == 0) {\n          var articles = that.state.articles;\n          for (let i in articles) {\n            if (articles[i].id == id) {\n              articles[i] = dt.data;\n              that.setState({\n                articles: articles\n              });\n              break;\n            }\n          }\n        }\n      }\n    })\n  }\n  fetchArticles() {\n    var that = this;\n    $.ajax({\n      url: '/admin/datas/articles/get',\n      type: 'get',\n      data: that.filter,\n      dataType: 'json',\n      success: function(dt) {\n        if (dt.code == 0) {\n          that.setState({\n            articles: dt.data.data,\n            current: dt.data.current,\n            total: dt.data.total,\n            checkState: {}\n          });\n        }\n      }\n    });\n  }\n  fetchCategories() {\n    var that = this;\n    $.ajax({\n      url: '/admin/datas/categories/get',\n      type: 'get',\n      dataType: 'json',\n      success: function(dt) {\n        if (dt.code == 0) {\n          that.setState({\n            categories: dt.data\n          })\n        }\n      }\n    })\n  }\n  handlePageChange(i) {\n    this.filter.start = i;\n    this.fetchArticles();\n  }\n  handleFilterChange(label, value) {\n    if (this.filter[label] == value) return;\n    this.filter[label] = value;\n    this.filter.start = 0;\n    this.fetchArticles();\n  }\n  handleDeleteArticle(id) {\n    this.setState({\n      delVisible: true,\n      delArticleId: id,\n      isgroup: false\n    })\n  }\n  deleteArticleConfirm() {\n    var that = this;\n    $.ajax({\n      url: '/admin/datas/articles/delete',\n      data: {id: that.state.delArticleId},\n      type: 'post',\n      dataType: 'json',\n      success: function(dt) {\n        if (dt.code == 0) {\n          that.setState({\n            delVisible: false,\n            delArticleId: -1\n          })\n          that.fetchArticles();\n        }\n      }\n    })\n  }\n  deleteArticleCancel() {\n    this.setState({\n      delVisible: false\n    })\n  }\n  groupOpeChange(title, value) {\n    var checkState = this.state.checkState;\n    var ids = [];\n    for (let key in checkState) {\n      if (checkState[key]) ids.push(key);\n    }\n    ids = ids.join(',');\n    switch (value) {\n      case 'on':\n      case 'off':\n        this.articleStateChange(ids, value, true);\n        break;\n      case 'move':\n        this.setState({\n          moveArticleId: ids,\n          isgroup: true,\n          moveVisible: true\n        })\n        break;\n      case 'del':\n        this.setState({\n          delArticleId: ids,\n          isgroup: true,\n          delVisible: true\n        })\n        break;\n      default:\n        break;\n    }\n  }\n  //category\n  moveCategoryConfirm(gid) {\n    this.articleGroupChange(this.state.moveArticleId, gid, false);\n  }\n  moveCategoryCancel() {\n    this.setState({\n      moveVisible: false\n    })\n  }\n  handleMoveCategory(id) {\n    this.setState({\n      moveArticleId: id,\n      isgroup: false,\n      moveVisible: true\n    })\n  }\n  render() {\n    /**\n     * 这样感觉封装性稍差一点\n     * 以后更有体会了再来看看😊\n     * 先做一个标记\n     */\n    var groupopeReset = true;\n    return (\n      <div>\n        <div className = 'table-filter-bar table-filter-bar-top'>\n\t        <button className = 'operation-button' onClick = {this.addArticle}>添加文章</button>\n      \t  <FilterInput title = 'label' label = '标签' change = {this.handleFilterChange} />\n      \t  <FilterInput title = 'category' label = '类别' change = {this.handleFilterChange} />\n\t        <FilterSelect title = 'state' label = '状态' options = {this.stateOptions} change = {this.handleFilterChange} />\n        </div>\n        <ArticleTable articles = {this.state.articles} checkState = {this.state.checkState} fetchSingleArticle = {this.fetchSingleArticle} checkStateChange = {this.checkStateChange} articleStateChange = {this.articleStateChange} handleMoveCategory = {this.handleMoveCategory} allChecked = {this.allChecked} delete = {this.handleDeleteArticle}/>\n        <div className = 'table-filter-bar table-filter-bar-bottom'>\n       \t  <FilterSelect title = 'groupope' options = {this.opeOptions} change = {this.groupOpeChange} reset = {groupopeReset} defaultVal = '-1'/>\n        </div>\n        <TableNavLink page = {this.state.current} total = {this.state.total} pagechange = {this.handlePageChange} />\n        <ConfirmDialog title = '确认删除?' confirm = {this.deleteArticleConfirm} cancel = {this.deleteArticleCancel} visible = {this.state.delVisible} />\n        <MoveGroupDialog categories = {this.state.categories} confirm = {this.moveCategoryConfirm} cancel = {this.moveCategoryCancel} visible = {this.state.moveVisible} />\n      </div>\n    );\n  }\n}\nfunction adminArticlesInit() {\n  ReactDOM.render(\n    <ArticleLayout />,\n    document.getElementById('table-div')\n  );\n}","class OperationBar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.addNewCategory = this.addNewCategory.bind(this);\n  }\n  addNewCategory() {\n    this.props.addNewCategory(true, 'add');\n  }\n  render() {\n    return (\n      <div className = 'table-operation-bar table-operation-bar-top'>\n        <button className = 'operation-button operation-button-confirm' onClick = {this.addNewCategory}>新建类别</button>\n      </div>\n    )\n  }\n}\nclass AddCategoryDiv extends React.Component {\n  constructor(props) {\n    super(props);\n    this.valueChange = this.valueChange.bind(this);\n    this.addCategoryCancel = this.addCategoryCancel.bind(this);\n    this.addCategoryConfirm = this.addCategoryConfirm.bind(this);\n  }\n  valueChange(e) {\n    var title = e.target.getAttribute('data-title');\n    var value = e.target.value;\n    var data = this.props.data;\n    data[title] = value;\n    this.props.valueChange(data);\n  }\n  addCategoryCancel(e) {\n    this.props.cancel();\n    e.preventDefault();\n  }\n  addCategoryConfirm(e) {\n    var name = this.nameInput.value;\n    var parent = this.parentSelect.value;\n    var descp = this.descpArea.value;\n    var data = {\n      name: name,\n      parent: parent,\n      descp: descp\n    }\n    this.props.confirm(data);\n    e.preventDefault();\n  }\n  render() {\n    var data = this.props.data == {} ? {} : this.props.data;\n    var name = data.name ? data.name : '';\n    var parent = data.parent ? data.parent : '';\n    var descp = data.descp ? data.descp : '';\n    var categoryItems = this.props.categories.map((category) => {\n      if (category.id == parent) {\n        return (<option value = {category.id} selected>{category.name}</option>);\n      } else {\n        return (<option value = {category.id}>{category.name}</option>);\n      }\n    });\n    var styles;\n    if (this.props.visible) {\n      styles = {\n        height: '300px',\n        'border-width': '1px',\n        opacity: 1\n      }\n    } else {\n      styles = {\n        height: '0',\n        'border-width': '0',\n        opacity: 0\n      }\n    }\n    return (\n      <div id = 'add-category-div' style = {styles}>\n        <form id = 'add-category-form'>\n          <legend id = 'add-category-div-title'>{this.props.title}</legend>\n          <li className = 'add-category-div-item' id = 'add-category-div-name'>\n            <label className = 'add-category-div-item-label'>标题</label>\n            <input ref = {(input) => {this.nameInput = input;}} className = 'add-category-div-item-input' id = 'add-category-div-item-input-name' type='text' data-title = 'name' value = {name} onChange = {this.valueChange}/>\n          </li>\n          <li className = 'add-category-div-item' id = 'add-category-div-parent'>\n            <label className = 'add-category-div-item-label'>父节点</label>\n            <select ref = {(select) => {this.parentSelect = select;}} className = 'add-category-div-item-input' id = 'add-category-div-item-input-parent' data-title = 'parent' onChange = {this.valueChange}>\n              {categoryItems}\n            </select>\n          </li>\n          <li className = 'add-category-div-item' id = 'add-category-div-descp'>\n            <label className = 'add-category-div-item-label'>描述</label>\n            <textarea ref = {(textarea) => {this.descpArea = textarea;}} className = 'add-category-div-item-textarea' id = 'add-category-div-item-input-descp' value = {descp} data-title = 'descp' onChange = {this.valueChange} />\n          </li>\n          <li className = 'add-category-div-item add-category-div-opebar'>\n            <button className = 'operation-button operation-button-cancel' onClick = {this.addCategoryCancel}>取消</button>\n            <button className = 'operation-button operation-button-confirm' onClick = {this.addCategoryConfirm}>添加</button>\n          </li>\n        </form>\n      </div>\n    )\n  }\n}\nclass CategoryLabel extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  render() {\n    return (\n      <tr className = 'content-row-label category-row-label'>\n        <th className = 'category-row-index-label'>序号</th>\n        <th className = 'category-row-name-label'>名称</th>\n        <th className = 'category-row-parent-label'>父节点</th>\n        <th className = 'category-row-descp-label'>描述</th>\n        <th className = 'category-row-order-label'>顺序</th>\n        <th className = 'category-row-articlecnt-label'>文章数</th>\n        <th className = 'content-row-operation-label category-row-operation-label'>操作</th>\n      </tr>\n    );\n  }\n}\nclass CategoryRow extends React.Component {\n  constructor(props) {\n    super(props);\n    this.categoryOperationClick = this.categoryOperationClick.bind(this);\n    this.categoryOrderChange = this.categoryOrderChange.bind(this);\n    this.categoryOrderKeyDown = this.categoryOrderKeyDown.bind(this);\n  }\n  categoryOperationClick(e) {\n    var type = e.target.getAttribute('data-type');\n    var id = e.target.parentNode.getAttribute('data-id');\n    if (type == 'modify') {\n      this.props.modify(true, 'modify', this.props.category);\n    } else if (type == 'delete') {\n      this.props.delete(id);\n    }\n  }\n  categoryOrderChange(e) {\n    var id = this.props.category.id;\n    var order = e.target.value;\n    this.props.handleCategoryOrderChange(id, order);\n  }\n  categoryOrderKeyDown(e) {\n    if (e.which == 13) {\n      var id = this.props.category.id;\n      var order = e.target.value;\n      this.props.updateCategoryOrder(id, order);\n    }\n  }\n  render() {\n    var category = this.props.category;\n    var operationUl = (\n      <ul className='article-operation-ul' data-id = {this.props.category.id}>\n        <li data-type = 'modify' onClick = {this.categoryOperationClick}>修改</li>\n        <li data-type='delete' onClick = {this.categoryOperationClick}>删除</li>\n        <li data-type='refact'><a href = {'/admin/categories/refact/' + category.id}>重构</a></li>\n      </ul>\n    );\n    return (\n      <tr className = 'content-row-data category-row-data'>\n        <td className = 'category-row-index-data'>{category.id}</td>\n        <td className = 'category-row-name-data'><a href = {'/articles/category/' + category.id}>{category.name}</a></td>\n        <td className = 'category-row-parent-data'>{category.parent}</td>\n        <td className = 'category-row-descp-data'>{category.descp}</td>\n        <td className = 'category-row-order-data'><input type='number' value={category.mainorder} onChange = {this.categoryOrderChange} onKeyDown = {this.categoryOrderKeyDown} /></td>\n        <td className = 'category-row-articlecnt-data'>{category.articlecnt}</td>\n        <td className = 'content-row-operation-data'>{operationUl}</td>\n      </tr>\n    );\n  }\n}\nclass CategoryTable extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  render() {\n    var categories = this.props.categories.map((category) => (\n      <CategoryRow category = {category} modify = {this.props.modify} delete = {this.props.delete} handleCategoryOrderChange = {this.props.handleCategoryOrderChange} updateCategoryOrder = {this.props.updateCategoryOrder} />\n    ));\n    return (\n      <table className = 'content-table category-content-table'>\n        <thead>\n          <CategoryLabel />\n        </thead>\n        <tbody>\n          {categories}\n        </tbody>\n        <tfoot>\n        </tfoot>\n      </table>\n    );\n  }\n}\nclass CategoryLayout extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      categories: [],\n      addVisible: false,\n      addType: 'add',\n      addData: {},\n      \n      delVisible: false\n    }\n    this.addTitle = {\n      add: '添加类别',\n      modify: '修改类别'\n    }\n    this.addCategoryDivStateChange = this.addCategoryDivStateChange.bind(this);\n    this.addCategoryDivValueChange = this.addCategoryDivValueChange.bind(this);\n    this.addCategoryDivConfirm = this.addCategoryDivConfirm.bind(this);\n    this.addCategoryDivCancel = this.addCategoryDivCancel.bind(this);\n    this.handleDeleteClick = this.handleDeleteClick.bind(this);\n    this.deleteCategoryConfirm = this.deleteCategoryConfirm.bind(this);\n    this.deleteCategoryCancel = this.deleteCategoryCancel.bind(this);\n    // category order\n    this.handleCategoryOrderChange = this.handleCategoryOrderChange.bind(this);\n    this.updateCategoryOrder = this.updateCategoryOrder.bind(this);\n    \n    this.fetchCategoryDatas = this.fetchCategoryDatas.bind(this);\n    this.fetchCategoryDatas();\n  }\n  addCategoryDivStateChange(visible, type = this.state.addType, data = {}) {\n    this.setState({\n      addVisible: visible,\n      addType: type,\n      addData: data\n    })\n  }\n  addCategoryDivConfirm(data) {\n    var url = '';\n    if (this.state.addType == 'add') {\n      url = '/admin/datas/categories/add';\n    } else if (this.props.addType = 'modify') {\n      url = '/admin/datas/categories/modify';\n      data.id = this.state.addData.id;\n    }\n    var that = this;\n    $.ajax({\n      url:url,\n      data: data,\n      type: 'post',\n      dataType: 'json',\n      success: function(dt) {\n        if (dt.code == 0) {\n          that.addCategoryDivStateChange(false);\n          that.fetchCategoryDatas();\n        }\n      }\n    })\n  }\n  addCategoryDivCancel() {\n    this.addCategoryDivStateChange(false);\n  }\n  addCategoryDivValueChange(data) {\n    this.setState({\n      addData: data\n    })\n  }\n  deleteCategoryConfirm() {\n    var that = this;\n    $.ajax({\n      url: '/admin/datas/categories/delete',\n      data: {id: that.state.delCategoryId},\n      type: 'post',\n      dataType: 'json',\n      success: function(dt) {\n        if (dt.code == 0) {\n          that.setState({\n            delVisible: false,\n            delCategoryId: -1\n          })\n          that.fetchCategoryDatas();\n        }\n      }\n    })\n  }\n  deleteCategoryCancel() {\n    this.setState({\n      delVisible: false\n    })\n  }\n  handleDeleteClick(id) {\n    this.setState({\n      delVisible: true,\n      delCategoryId: id\n    })\n  }\n  handleCategoryOrderChange(id, order) {\n    var categories = this.state.categories;\n    for (var i in categories) {\n      if (categories[i].id == id) {\n        categories[i].mainorder = order;\n        this.setState({\n          categories: categories\n        })\n        break;\n      }\n    }\n  }\n  updateCategoryOrder(id, order) {\n    var that = this;\n    $.ajax({\n      url:'/admin/datas/categories/modify',\n      data: {id: id, order: order},\n      type: 'post',\n      dataType: 'json',\n      success: function(dt) {\n        if (dt.code == 0) {\n          that.fetchCategoryDatas();\n        }\n      }\n    })\n  }\n  fetchCategoryDatas() {\n    var that = this;\n    $.ajax({\n      url: '/admin/datas/categories/get',\n      type: 'get',\n      dataType: 'json',\n      success: function(dt) {\n        if (dt.code == 0) {\n          localStorage.setItem('categories', JSON.stringify(dt.data));\n          that.setState({\n            categories: dt.data\n          })\n        }\n      }\n    })\n  }\n  render() {\n    var categories = this.state.categories;\n    var addType = this.state.addType;\n    return (\n      <div>\n        <OperationBar addNewCategory = {this.addCategoryDivStateChange}/>\n        <CategoryTable categories = {categories} fetchCategoryDatas = {this.fetchCategoryDatas} modify= {this.addCategoryDivStateChange} delete = {this.handleDeleteClick} handleCategoryOrderChange = {this.handleCategoryOrderChange} updateCategoryOrder = {this.updateCategoryOrder}/>\n        <AddCategoryDiv type = {addType} title = {this.addTitle[addType]} data = {this.state.addData} categories = {categories} visible = {this.state.addVisible} confirm = {this.addCategoryDivConfirm} cancel = {this.addCategoryDivCancel} valueChange = {this.addCategoryDivValueChange} />\n        <ConfirmDialog title = '确认删除此类别?' visible = {this.state.delVisible} confirm = {this.deleteCategoryConfirm} cancel = {this.deleteCategoryCancel} />\n      </div>\n    );\n  }\n}\nfunction adminCategoriesInit() {\n  ReactDOM.render(\n    <CategoryLayout />,\n    document.getElementById('table-div')\n  );\n}\n","class DetailArea extends React.Component {\n  constructor(props) {\n    super(props);\n    this.articleOrderChange = this.articleOrderChange.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.prefaceButtonClicked = this.prefaceButtonClicked.bind(this);\n  }\n  articleOrderChange(e) {\n    this.props.orderChange(e.target.value);\n  }\n  prefaceButtonClicked(e) {\n    var type = e.target.getAttribute('data-type');\n    var isSet = type == 'set';\n    this.props.prefaceChange(this.props.data.id, isSet);\n  }\n  handleKeyDown(e) {\n    if (e.which == 13) {\n      this.props.orderChange(e.target.value, true);\n    }\n  }\n  render() {\n    var data = this.props.data;\n    if (data.id) {\n      var opeArea;\n      if (data.type == 'dir') {\n        opeArea = (\n          <div id = 'refact-detail-ope-area'>\n            <button id = 'refact-detail-ope-button' className = 'operation-button operation-button-confirm' data-type = 'cancel' onClick = {this.prefaceButtonClicked} >取消序言</button>\n          </div>\n        )\n      } else {\n        opeArea = (\n          <div id = 'refact-detail-ope-area'>\n            <button id = 'refact-detail-ope-button' className = 'operation-button operation-button-confirm' data-type = 'set' onClick = {this.prefaceButtonClicked} >设为序言</button>\n            <label id = 'refact-detail-ope-order-label'>展示顺序</label><input id = 'refact-detail-ope-order-input' type = 'number' value = {data.suborder} onChange = {this.articleOrderChange} onKeyDown = {this.handleKeyDown} />\n          </div>\n        )\n      }\n      return (\n        <div id = 'refact-detail-area'>\n          <div id = 'refact-article-brief-area'>\n            <h1 id = 'refact-article-brief-area-title'>{data.title}</h1>\n            <div id = 'refact-article-brief-area-descp'>{data.descp}</div>\n          </div>\n          {opeArea}\n        </div>\n      )\n    } else {\n      return (\n        <div id = 'refact-detail-area'></div>\n      )\n    }\n  }\n}\nclass ArticleItemLi extends React.Component {\n  constructor(props) {\n    super(props);\n    this.onItemClicked = this.onItemClicked.bind(this);\n  }\n  onItemClicked (e) {\n    var article = this.props.article;\n    this.props.click('art', article.id, this.props.cid);\n  }\n  render() {\n    var depth = this.props.depth;\n    var styles = {\n      'padding-left': (depth * 20 + 20) + 'px'\n    }\n    var article = this.props.article;\n    var articleClass = 'category-tree-article-li';\n    if (article.id == this.props.articleId) {\n      articleClass += ' category-tree-article-li-current';\n    }\n    return <li className = {articleClass} style = {styles} onClick = {this.onItemClicked} >{article.title}</li>\n  }\n}\nclass CategoryItemLi extends React.Component {\n  constructor(props) {\n    super(props);\n    this.expandChange = this.expandChange.bind(this);\n    this.handleCategoryClick = this.handleCategoryClick.bind(this);\n  }\n  handleCategoryClick(e) {\n    var target = e.target;\n    this.props.click('dir', this.props.category.id, this.props.category.id);\n  }\n  expandChange(e) {\n    this.props.expandChange(this.props.category.id);\n    e.stopPropagation();\n  }\n  render() {\n    var depth = this.props.depth;\n    var styles = {\n      'padding-left': (depth * 20 + 20) + 'px'\n    }\n    var category = this.props.category;\n    var content = category.childs.map((child) => {\n      if (child.type == 'art') {\n        return <ArticleItemLi article = {child} cid = {category.id} articleId = {this.props.articleId} depth = {depth + 1} click = {this.props.click} />\n      } else {\n        return <CategoryItemLi category = {child}  categoryId = {this.props.categoryId} articleId = {this.props.articleId} cstate = {this.props.cstate} depth = {depth + 1} click = {this.props.click} expandChange = {this.props.expandChange} />\n      }\n    })\n    var titleClass = 'category-tree-category-title';\n    if (category.id == this.props.categoryId) {\n      titleClass += ' category-tree-category-title-current';\n    }\n    var articlesUlStyle = {};\n    var titleImage = '/images/icons/ic_expand_more_white_24dp_2x.png';\n    if (this.props.cstate[category.id] === false) {\n      articlesUlStyle.display = 'none';\n      titleImage = '/images/icons/ic_expand_less_white_24dp_2x.png';\n    }\n    return (\n      <li className = 'category-tree-category-li'>\n        <div className = 'category-tree-category-title-div'>\n          <span className = {titleClass} onClick = {this.handleCategoryClick} style = {styles}>{category.title}</span>\n          <img className = 'category-tree-category-title-img' src = {titleImage} onClick = {this.expandChange}></img>\n        </div>\n        <ul className = 'category-tree-category-ul' style = {articlesUlStyle}>\n          {content}\n        </ul>\n      </li>\n    )\n  }\n}\nclass CategoryTree extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  render() {\n    var tree = this.props.tree;\n    if (tree.length) {\n      return (\n        <div id = 'refact-tree-area'>\n          <ul className = 'category-tree-category-ul'>\n            <CategoryItemLi category = {this.props.tree[0]} categoryId = {this.props.categoryId} articleId = {this.props.articleId} cstate = {this.props.cstate} depth = {0} click = {this.props.click} expandChange = {this.props.expandChange} />\n          </ul>\n        </div>\n      );\n    } else {\n      return <div>EMPTY</div>\n    }\n  }\n}\nclass ReformArea extends React.Component {\n  constructor(props) {\n    super(props);\n    var cid = Number(location.pathname.match(/\\/admin\\/categories\\/refact\\/(\\d+)/)[1]);\n    this.state = {\n      cid: cid,\n      tree: [],\n      detail: {},\n      category: -1,\n      article: -1,\n      cstate: {}  //categoryExpandState\n    }\n    this.articleOrderChange = this.articleOrderChange.bind(this);\n    this.categoryPrefaceChange = this.categoryPrefaceChange.bind(this);\n    this.categoryExpandChange = this.categoryExpandChange.bind(this);\n    this.__getReactDetail = this.__getReactDetail.bind(this);\n    this.getReactDetail = this.getReactDetail.bind(this);\n    this.getCategoryTree = this.getCategoryTree.bind(this);\n    this.getCategoryTree();\n  }\n  articleOrderChange(newOrder, update = false) {\n    var that = this;\n    var id = this.state.detail.id;\n    if (update) {\n      $.ajax({\n        url: '/admin/datas/articles/order',\n        data: {id: id, order: newOrder},\n        type: 'get',\n        dataType: 'json',\n        success: function(dt) {\n          if (dt.code == 0) {\n            that.getCategoryTree();\n          }\n        }\n      })\n    } else {\n      var detail = this.state.detail;\n      detail.suborder = newOrder;\n      this.setState({\n        detail: detail\n      })\n    }\n  }\n  categoryPrefaceChange(id, isSet = true) {\n    var that = this;\n    var detail = this.state.detail;\n    var data = {\n      category: this.state.category,\n      preface: id,\n      isSet: isSet\n    }\n    $.ajax({\n      url: '/admin/datas/categories/preface',\n      data: data,\n      type: 'get',\n      dataType: 'json',\n      success: function(dt) {\n        if (dt.code == 0) {\n          that.getCategoryTree();\n        }\n      }\n    })\n  }\n  categoryExpandChange(id) {\n    var cstate = this.state.cstate;\n    cstate[id] = cstate[id] === false;\n    this.setState({\n      cstate: cstate\n    })\n  }\n  getCategoryTree() {\n    var that = this;\n    var cid = this.state.cid;\n    $.ajax({\n      url: '/admin/datas/categories/tree',\n      data: {id: cid},\n      type: 'get',\n      dataType: 'json',\n      success: function(dt) {\n        if (dt.code == 0) {\n          var data = dt.data;\n          var root = data[0];\n          var tid = that.state.category == -1 ? root.id : that.state.category;\n          that.setState({\n            tree: data\n          })\n          that.__getReactDetail(\n            'dir',\n            tid,\n            function(dt1) {\n              var detail = dt1.code == 0 ? dt1.data : {};\n              that.setState({\n                detail: detail,\n                category: tid,\n              })\n            }\n          )\n        }\n      }\n    })\n  }\n  getReactDetail(type, id, cid) {\n    var that = this;\n    cid = type == 'dir' ? id : cid;\n    this.__getReactDetail(type, id, function(dt) {\n      var detail = dt.code == 0 ? dt.data : {};\n      var aid = (type === 'art' && detail.id) ? detail.id : -1;\n      that.setState({\n        detail: detail,\n        category: cid,\n        article: aid\n      })\n    });\n  }\n  __getReactDetail(type, id, cb) {\n    $.ajax({\n      url: '/admin/datas/categories/refact/get',\n      data: {type: type, id: id},\n      type: 'get',\n      dataType: 'json',\n      success: function(dt) {\n        cb(dt);\n      }\n    })\n  }\n  render() {\n    return (\n      <div id = 'refact-area'>\n        <CategoryTree tree = {this.state.tree} category = {this.state.category} categoryId = {this.state.category} articleId = {this.state.article} cstate = {this.state.cstate} click = {this.getReactDetail} expandChange = {this.categoryExpandChange} />\n        <DetailArea data = {this.state.detail} orderChange = {this.articleOrderChange} prefaceChange = {this.categoryPrefaceChange} />\n      </div>\n    )\n  }\n}\nfunction adminCategoryRefactInit() {\n  ReactDOM.render(\n    <ReformArea />,\n    document.getElementById('reform-area')\n  );\n}\n","// 这个扩展是从网上复制过来的\nDate.prototype.format = function (fmt) { //author: meizz\n  var o = {\n    \"M+\": this.getMonth() + 1, //月份\n    \"d+\": this.getDate(), //日\n    \"h+\": this.getHours(), //小时\n    \"m+\": this.getMinutes(), //分\n    \"s+\": this.getSeconds(), //秒\n    \"q+\": Math.floor((this.getMonth() + 3) / 3), //季度\n    \"S\": this.getMilliseconds() //毫秒\n  };\n  if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + \"\").substr(4 - RegExp.$1.length));\n    for (var k in o)\n      if (new RegExp(\"(\" + k + \")\").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\n    return fmt;\n  };\nclass LabelTableLabel extends React.Component {\n  constructor(props) {\n    super(props);\n    this.orderState = {\n      asc: {\n        label: 'asc',\n        imgsrc: '/images/icons/ic_arrow_drop_down_white_24dp_2x.png'\n      },\n      desc: {\n        label: 'desc',\n        imgsrc: '/images/icons/ic_arrow_drop_up_white_24dp_2x.png'\n      }\n    }\n    this.handleOrderImgClick = this.handleOrderImgClick.bind(this);\n  }\n  handleOrderImgClick(e) {\n    var orderby = e.target.getAttribute('data-label');\n    var orderDirect = this.props.orderDirect == this.orderState.asc.label ? this.orderState.desc.label : this.orderState.asc.label;\n    this.props.orderChange(orderby, orderDirect);\n  }\n  render() {\n    var targetsrc, othersrc;\n    if (this.props.orderDirect == this.orderState.asc.label) {\n      targetsrc = this.orderState.asc.imgsrc;\n    } else {\n      targetsrc = this.orderState.desc.imgsrc;\n    }\n    othersrc = this.orderState.asc.imgsrc;\n    return (\n      <tr className = 'content-row-label'>\n        <th className = 'content-row-index-label label-row-index-label'>序号<img className = 'label-row-hotmark-order-img' src = {this.props.orderby == 'id' ? targetsrc : othersrc} data-label = 'id' onClick =  {this.handleOrderImgClick} ></img></th>\n        <th className = 'content-row-title-label label-row-title-label'>标题</th>\n        <th className = 'content-row-article-count-label label-row-articlecnt-label'>文章数<img className = 'label-row-hotmark-order-img' src = {this.props.orderby == 'id' ? targetsrc : othersrc} data-label = 'articles' onClick =  {this.handleOrderImgClick} ></img></th>\n        <th className = 'content-row-hotmark-label label-row-hotmark-label'>热度<img className = 'label-row-hotmark-order-img' src = {this.props.orderby == 'hotmark' ? targetsrc : othersrc} data-label = 'hotmark' onClick =  {this.handleOrderImgClick} ></img></th>\n        <th className = 'content-row-addtime-label label-row-addtime-label'>添加日期</th>\n      </tr>\n    )\n  }\n}\nclass LabelRow extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  render() {\n    const label = this.props.label;\n    var addtime = new Date(label.addtime * 1000).format('yyyy-MM-dd');\n    return (\n      <tr className = 'content-row-data'>\n        <td className = 'content-row-index-data'>{label.id}</td>\n        <td className = 'content-row-title-data label-row-title-data'><a href = {'/articles/search?args=' + label.name}>{label.name}</a></td>\n        <td className = 'content-row-article-count-data'>{label.articles}</td>\n        <td className = 'content-row-hotmark-data'>{label.hotmark}</td>\n        <td className = 'content-row-addtime-data'>{addtime}</td>\n      </tr>\n    )\n  }\n}\nclass LabelTable extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  render() {\n    const labels = this.props.labels.map((label) => (\n      <LabelRow label = {label} />\n    ))\n    return (\n      <table className = 'content-table'>\n        <thead>\n          <LabelTableLabel orderby = {this.props.orderby} orderDirect = {this.props.orderDirect} orderChange = {this.props.orderChange} />\n        </thead>\n        <tbody>\n          {labels}\n        </tbody>\n        <tfoot>\n        </tfoot>\n      </table>\n    )\n  }\n}\nclass LabelLayout extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      current: 0,\n      total: 0,\n      orderby: 'id',\n      orderDirect: 'asc',\n      labels: []\n    }\n    this.filter = {start : 0};\n    this.handleOrderChange = this.handleOrderChange.bind(this);\n    this.handlePageChange = this.handlePageChange.bind(this);\n    this.fetchLabelData = this.fetchLabelData.bind(this);\n    this.fetchLabelData(this.state.orderby, this.state.orderDirect);\n  }\n  handlePageChange(i) {\n    this.filter.start = i;\n    this.fetchLabelData();\n  }\n  handleOrderChange(orderby, orderDirect) {\n    this.filter.start = 0;\n    this.fetchLabelData(orderby, orderDirect);\n  }\n  fetchLabelData(orderby, orderDirect) {\n    var that = this;\n    var data = {\n      start: this.filter.start,\n      orderby: orderby,\n      asc: orderDirect\n    }\n    $.ajax({\n      url: '/admin/datas/labels/get',\n      data: data,\n      type: 'get',\n      dataType: 'json',\n      success: function(dt) {\n        if (dt.code == 0) {\n          var returnData = dt.data;\n          that.setState({\n            current: returnData.current,\n            total: returnData.total,\n            orderby: orderby,\n            orderDirect: orderDirect,\n            labels: returnData.data\n          });\n        }\n      }\n    })\n  }\n  render() {\n    return (\n      <div id = 'label-table-div'>\n        <LabelTable labels = {this.state.labels} orderby = {this.state.orderby} orderDirect = {this.state.orderDirect} orderChange = {this.handleOrderChange} />\n        <TableNavLink page = {this.state.current} total = {this.state.total} pagechange = {this.handlePageChange} />\n      </div>\n    );\n  }\n}\nfunction adminLabelsInit() {\n  ReactDOM.render(\n    <LabelLayout />,\n    document.getElementById('table-div')\n  );\n}\n","class InputDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleConfirmClick = this.handleConfirmClick.bind(this);\n    this.handleCancelClick = this.handleCancelClick.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n  }\n  handleConfirmClick() {\n    var val = this.textInput.value;\n    this.props.confirm(val);\n    this.textInput.value = \"\";\n  }\n  handleCancelClick() {\n    this.props.cancel();\n  }\n  handleKeyDown(e) {\n    if (e.which == 13) {\n      this.handleConfirmClick();\n    }\n  }\n  render() {\n    var styles = {};\n    if (!this.props.visible)\n      styles.display = 'none';\n    return (\n      <div className = 'dialog-div input-dialog' style = {styles}>\n        <div className = 'dialog-header-div'>\n          <div className = 'dialog-title-div'>{this.props.title}</div>\n        </div>\n        <div className = 'dialog-main-body-div'>\n          <input className = 'dialog-content-input' ref = {(input) => (this.textInput = input)} onKeyDown = {this.handleKeyDown} />\n        </div>\n        <div className = 'dialog-buttom-operation-bar'>\n          <button className = 'dialog-operation-button dialog-confirm-button' onClick = {this.handleConfirmClick}>确定</button>\n          <button className = 'dialog-operation-button dialog-cancel-button' onClick = {this.handleCancelClick}>取消</button>\n        </div>\n      </div>\n    );\n  }\n}\n\nclass MovePhotoGroupDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleConfirmClick = this.handleConfirmClick.bind(this);\n    this.handleCancelClick = this.handleCancelClick.bind(this);\n    this.handleGroupChange = this.handleGroupChange.bind(this);\n    this.state = {\n      newgroup : -1\n    };\n  }\n\n  handleConfirmClick(e) {\n    this.props.confirm(this.state.newgroup);\n  }\n\n  handleCancelClick(e) {\n    this.props.cancel();\n  }\n\n  handleGroupChange(e) {\n    var radio = e.target;\n    if (radio.checked) {\n      this.setState({\n        newgroup: radio.value\n      });\n    }\n  }\n\n  render() {\n    var styles = {}, groups = [];\n    if (!this.props.visible) styles.display = 'none';\n    if (localStorage.getItem('photo_group')) {\n      groups = JSON.parse(localStorage.getItem(\"photo_group\"));\n    }\n    var groupItems = groups.map((group) => {\n      if (group.id == -1) return '';\n      return (\n        <li className = 'move-group-radio-li'>\n          <input type = 'radio' name = 'photogroup' value = {group.id} onChange = {this.handleGroupChange}/>\n          <label>{group.name}</label>\n        </li>\n      );\n    });\n    return (\n      <div className = 'dialog-div option-dialog' style = {styles}>\n        <div className = 'dialog-main-body-div'>\n          <ul id = 'move-group-radio-ul'>\n            {groupItems}\n          </ul>\n        </div>\n        <div className = 'dialog-bottom-operation-bar'>\n          <button className = 'dialog-operation-button dialog-confirm-button' onClick = {this.handleConfirmClick}>确定</button>\n          <button className = 'dialog-operation-button dialog-cancel-button' onClick = {this.handleCancelClick}>取消</button>\n        </div>\n      </div>\n    );\n  }\n}\n\nclass PhotoFlowOperationBar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      moveVisible: false,\n      delVisible: false\n    }\n    this.handleUploadButtonClick = this.handleUploadButtonClick.bind(this);\n    this.handleUploadInputChange = this.handleUploadInputChange.bind(this);\n    \n    // Dialog Visibility\n    this.hideMoveDialog = this.hideMoveDialog.bind(this);\n    this.hideDelDialog = this.hideDelDialog.bind(this);\n    // MoveDialog\n    this.handleMoveConfirm = this.handleMoveConfirm.bind(this);\n    this.handleMoveCancel = this.handleMoveCancel.bind(this);\n    // DeleteDialog\n    this.handleDelConfirm = this.handleDelConfirm.bind(this);\n    this.handleDelCancel = this.handleDelCancel.bind(this);\n    // button action\n    this.moveButtonClick = this.moveButtonClick.bind(this);\n    this.delButtonClick = this.delButtonClick.bind(this);\n    // all-check\n    this.handleAllCheckChanged = this.handleAllCheckChanged.bind(this);\n  }\n\n  handleUploadButtonClick(e) {\n    var input = this.uploadInput;\n    input.click();\n  }\n\n  handleUploadInputChange(e) {\n    this.props.handleUploadInputChange(e);\n  }\n\n  hideMoveDialog() {\n    this.setState({\n      moveVisible: false\n    });\n  }\n\n  hideDelDialog() {\n    this.setState({\n      delVisible: false\n    });\n  }\n\n  handleMoveConfirm(new_gid) {\n    this.props.handleMoveChecked(new_gid);\n    this.hideMoveDialog();\n  }\n\n  handleMoveCancel() {\n    this.hideMoveDialog();\n  }\n\n  handleDelConfirm() {\n    this.props.handleDeleteChecked();\n    this.hideDelDialog();\n  }\n\n  handleDelCancel() {\n    this.hideDelDialog();\n  }\n\n  moveButtonClick() {\n    this.setState({\n      moveVisible: true\n    });\n  }\n\n  delButtonClick() {\n    this.setState({\n      delVisible: true\n    })\n  }\n\n  handleAllCheckChanged(e) {\n    var allChecked = e.target.checked;\n    this.props.handleAllCheckChanged(allChecked);\n  }\n  render() {\n    var uploadInputStyles = {\n      display: 'none'\n    };\n    return (\n      <div>\n        <div className = 'photo-operation-bar' id = 'photo-operation-bar-first'>\n          <button id = 'upload-image-button' className='operation-button' onClick = {this.handleUploadButtonClick} >上传图片</button>\n          <input ref = {(input) => {this.uploadInput = input;}} id = 'upload-image-input' type = 'file' accept=\"image/*\" style = {uploadInputStyles} onChange = {this.handleUploadInputChange} />\n        </div>\n        <div className = 'photo-operation-bar' id = 'photo-operation-bar-second'>\n          <input type='checkbox' onChange = {this.handleAllCheckChanged}/><label>全选</label>\n          <div id = 'photo-flow-opebar-move-div'>\n            <button id = 'photo-flow-opebar-move-button' className = 'operation-button operation-button-confirm' onClick = {this.moveButtonClick}>移动分组</button>\n            <MovePhotoGroupDialog confirm = {this.handleMoveConfirm} cancel = {this.handleMoveCancel} visible = {this.state.moveVisible}/>\n          </div>\n          <div id = 'photo-flow-opebar-del-div'>\n            <button id = 'photo-flow-opebar-del-button' className = 'operation-button operation-button-cancel' onClick = {this.delButtonClick}>删除</button>\n            <ConfirmDialog title = '确认删除?' confirm = {this.handleDelConfirm} cancel = {this.handleDelCancel} visible = {this.state.delVisible} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nclass PhotoItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // config for InputDialog (edit)\n      inputVisible: false,\n      // config for MoveDialog \n      moveVisible: false,\n      // config for DelDialog\n      delVisible: false\n    };\n    this.handlePhotoCheck = this.handlePhotoCheck.bind(this);\n    //Dialog Visibility\n    this.showInputDialog = this.showInputDialog.bind(this);\n    this.hideInputDialog = this.hideInputDialog.bind(this);\n    this.showMoveDialog = this.showMoveDialog.bind(this);\n    this.hideMoveDialog = this.hideMoveDialog.bind(this);\n    this.showDelDialog = this.showDelDialog.bind(this);\n    this.hideDelDialog = this.hideDelDialog.bind(this);\n    // InputDialog\n    this.handleInputConfirm = this.handleInputConfirm.bind(this);\n    this.handleInputCancel = this.handleInputCancel.bind(this);\n    // MoveDialog\n    this.handleMoveConfirm = this.handleMoveConfirm.bind(this);\n    this.handleMoveCancel = this.handleMoveCancel.bind(this);\n    // DeleteDialog\n    this.handleDelConfirm = this.handleDelConfirm.bind(this);\n    this.handleDelCancel = this.handleDelCancel.bind(this);\n    this.photoOnLoad = this.photoOnLoad.bind(this);\n  }\n  handlePhotoCheck(e) {\n    this.props.handleCheckChange(e.target.value, e.target.checked);\n  }\n  showInputDialog(e) {\n    this.setState({\n      inputVisible: true\n    });\n  }\n  hideInputDialog(e) {\n    this.setState({\n      inputVisible: false\n    });\n  }\n  showMoveDialog(e) {\n    this.setState({\n      moveVisible: true\n    });\n  }\n  showDelDialog(e) {\n    this.setState({\n      delVisible: true\n    });\n  }\n  hideDelDialog(e) {\n    this.setState({\n      delVisible: false\n    });\n  }\n  hideMoveDialog(e) {\n    this.setState({\n      moveVisible: false\n    });\n  }\n  handleInputConfirm(name) {\n    this.props.rename(this.props.photo.id, name);\n    this.hideInputDialog();\n  }\n  handleInputCancel() {\n    this.hideInputDialog();\n  }\n  handleMoveConfirm(new_gid) {\n    this.props.movegroup(this.props.photo.id, new_gid);\n    this.hideMoveDialog();\n  }\n  handleMoveCancel() {\n    this.hideMoveDialog();\n  }\n  handleDelConfirm() {\n    this.props.delphoto(this.props.photo.id);\n    this.hideDelDialog();\n  }\n  handleDelCancel() {\n    this.hideDelDialog();\n  }\n  photoOnLoad(e) {\n    var img = e.target;\n    var a = new Image();\n    a.src = img.src;\n    var sw = a.width;\n    var sh = a.height;\n    var min = sw < sh ? sw : sh;\n    var scale = min / 200;\n    var nw = sw / scale;\n    var nh = sh / scale;\n    img.style.width = nw + 'px';\n    img.style.height = nh + 'px';\n  }\n  render() {\n    var photoSrc = '/images/blog/' + this.props.photo.name;\n    var checked = this.props.checked ? \"checked\" : \"\";\n    return (\n      <li className = 'photo-flow-item-li'>\n        <div className = 'photo-flow-item-li-img-div'>\n          <img className = 'photo-flow-item-li-img' src= {photoSrc} onLoad = {this.photoOnLoad}></img>\n        </div>\n        <div className = 'photo-flow-item-name-div'>\n          <input className = 'photo-flow-item-name-checkbox' type='checkbox' value = {this.props.photo.id} checked = {checked} onChange = {this.handlePhotoCheck}/>\n          <span className = 'photo-flow-item-name-span'>{this.props.photo.title}</span>\n        </div>\n        <div className = 'photo-flow-item-li-ope-bar'>\n          <li className = 'photo-flow-item-ope-img photo-flow-item-mode-edit' onClick = {this.showInputDialog}></li>\n          <li className = 'photo-flow-item-ope-img photo-flow-item-mode-swap' onClick = {this.showMoveDialog}></li>\n          <li className = 'photo-flow-item-ope-img photo-flow-item-mode-del' onClick = {this.showDelDialog}></li>\n        </div>\n        <InputDialog title = '编辑名称' confirm = {this.handleInputConfirm} cancel = {this.handleInputCancel} visible = {this.state.inputVisible}/>\n        <MovePhotoGroupDialog confirm = {this.handleMoveConfirm} cancel = {this.handleMoveCancel} visible = {this.state.moveVisible}/>\n        <ConfirmDialog title = '确认删除?' confirm = {this.handleDelConfirm} cancel = {this.handleDelCancel} visible = {this.state.delVisible} />\n      </li>\n    );\n  }\n}\n\nclass PhotoFlow extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      photos: [],\n      // 这个状态需要同步 😊 \n      checkState: {},\n      start: 0, //暂时没用到，做个标记😊 \n    };\n    this.handleUploadInputChange = this.handleUploadInputChange.bind(this);\n    this.handleCheckChange = this.handleCheckChange.bind(this);\n  \n    // all-check checkbox\n    this.handleAllCheckChanged = this.handleAllCheckChanged.bind(this);\n    this.handleDeleteChecked = this.handleDeleteChecked.bind(this);\n    this.handleMoveChecked = this.handleMoveChecked.bind(this);\n\n    this.moveGroup = this.moveGroup.bind(this);\n    this.moveSingleGroup = this.moveSingleGroup.bind(this);\n    this.renamePhoto = this.renamePhoto.bind(this);\n    this.deletePhotos = this.deletePhotos.bind(this);\n    this.deleteSinglePhoto = this.deleteSinglePhoto.bind(this);\n    this.getSinglePhoto = this.getSinglePhoto.bind(this);\n    this.getGroupPhotos = this.getGroupPhotos.bind(this);\n    this.getGroupPhotos();\n  }\n\n  handleAllCheckChanged(checked) {\n    var checkState = this.state.checkState;\n    this.state.photos.forEach((photo) => {\n      checkState[photo.id] = checked;\n    });\n    this.setState({\n      checkState: checkState\n    });\n  }\n\n  deletePhotos(ids) {\n    var that = this;\n    $.ajax({\n      url: '/admin/datas/photos/delete', \n      data: {photos: ids},\n      type: 'get',\n      dataType: 'json',\n      success: function(dt) {\n        that.props.handleRefetch();\n      }\n    })\n  }\n\n  deleteSinglePhoto(id) {\n    this.deletePhotos([id].join(','));\n  }\n\n  handleDeleteChecked() {\n    var ids = [];\n    for (let id in this.state.checkState) {\n      if (this.state.checkState[id]) {\n        ids.push(id);\n      }\n    }\n    this.deletePhotos(ids);\n  }\n\n  moveGroup(ids, new_gid) {\n    var that = this;\n    $.ajax({\n      url: '/admin/datas/photos/move',\n      data: {photos: ids, gid: new_gid},\n      type: 'get',\n      dataType: 'json',\n      success: function(dt) {\n        if (dt.code == 0) {\n          that.props.handleRefetch();\n        }\n      }\n    })\n  }\n\n  moveSingleGroup(id, new_gid) {\n    this.moveGroup([id].join(','), new_gid);\n  }\n\n  handleMoveChecked(new_gid) {\n    var ids = [];\n    for (let id in this.state.checkState) {\n      if (this.state.checkState[id]) {\n        ids.push(id);\n      }\n    }\n    this.moveGroup(ids.join(','), new_gid);\n  }\n\n  // 上传图片\n  handleUploadInputChange(e) {\n    var that = this;\n    var input = e.target;\n    var file = input.files[0];\n    var fd = new FormData();\n    fd.append('file', file);\n    fd.append('gid', this.props.gid);\n    $.ajax({\n      url: '/admin/datas/photos/add',\n      data: fd,\n      type: 'post',\n      dataType: 'json',\n      success: function(dt) {\n        that.props.handleRefetch();\n      },\n      error: function(err) {\n        console.log('error');\n      }\n    });\n  }\n\n  renamePhoto(id, name) {\n    var that = this;\n    $.ajax({\n      url: '/admin/datas/photos/rename',\n      data: {id: id, title: name},\n      type: 'get',\n      dataType: 'json',\n      success: function(dt) {\n        if (dt.code == 0) {\n          that.getSinglePhoto(id);\n        }\n      }\n    })\n  }\n\n  getSinglePhoto(id) {\n    var that = this;\n    $.ajax({\n      url: '/admin/datas/photos/get',\n      data: {id: id},\n      type: 'get',\n      dataType: 'json',\n      success: function(dt) {\n        if (dt.code == 0) {\n          var photos = that.state.photos;\n          for (let index in photos) {\n            if (photos[index].id == id) {\n              photos[index] = dt.data[0];\n              that.setState({\n                photos: photos\n              });\n              break;\n            }\n          }\n        }\n      }\n    })\n  }\n  /**\n   * 这里在 photo flow 中添加、移动、删除时不能更新\n   */\n  getGroupPhotos() {\n    var that = this;\n    // this or that 😊 在函数参数中，待查\n    $.ajax({\n      url: '/admin/datas/photos/get',\n      data: {gid: this.props.gid},\n      type: 'get',\n      dataType: 'json',\n      success: function(dt) {\n        if (dt.code == 0) {\n          that.setState({\n            photos: dt.data,\n            checkState: {}\n          });\n        }\n      }\n    })\n  }\n\n  handleCheckChange(id, checked) {\n    var checkState = this.state.checkState;\n    checkState[id] = checked;\n    this.setState({\n      checkState: checkState\n    });\n  }\n\n  render() {\n    const items = this.state.photos.map((photo) => {\n      var checked = this.state.checkState[photo.id] ? true : false;\n      return <PhotoItem photo = {photo} rename = {this.renamePhoto} movegroup = {this.moveSingleGroup} delphoto = {this.deleteSinglePhoto} handleCheckChange = {this.handleCheckChange} checked = {checked}/>\n    });\n    return (\n      <div id = 'photo-flow-div'>\n        <PhotoFlowOperationBar handleUploadInputChange = {this.handleUploadInputChange} handleAllCheckChanged = {this.handleAllCheckChanged} handleDeleteChecked = {this.handleDeleteChecked} handleMoveChecked = {this.handleMoveChecked} />\n        <ul id = 'photo-flow-items-ul'>\n          {items}\n        </ul>\n      </div>\n    );\n  }\n}\n\nclass PhotoGroupItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      inputVisible: false,\n      delVisible: false\n    }\n    // Dialog Visibility\n    this.showInputDialog = this.showInputDialog.bind(this);\n    this.hideInputDialog = this.hideInputDialog.bind(this);\n    this.showDelDialog = this.showDelDialog.bind(this);\n    this.hideDelDialog = this.hideDelDialog.bind(this);\n    // Dialog action\n    this.handleInputConfirm = this.handleInputConfirm.bind(this);\n    this.handleInputCancel = this.handleInputCancel.bind(this);\n    this.handleDelConfirm = this.handleDelConfirm.bind(this);\n    this.handleDelCancel = this.handleDelCancel.bind(this);\n    this.handleGroupItemClick = this.handleGroupItemClick.bind(this);\n    // Self-Owned action\n    this.handleDeleteGroup = this.handleDeleteGroup.bind(this);\n    this.handleRenameGroup = this.handleRenameGroup.bind(this);\n  }\n  showInputDialog(){\n    this.setState({\n      inputVisible: true\n    });\n  }\n  hideInputDialog() {\n    this.setState({\n      inputVisible: false\n    });\n  }\n  showDelDialog(){\n    this.setState({\n      delVisible: true\n    });\n  }\n  hideDelDialog() {\n    this.setState({\n      delVisible: false\n    });\n  }\n  handleInputConfirm(name) {\n    var gid = this.props.group.id;\n    this.props.handleRenameGroup(gid, name);\n    this.hideInputDialog();\n  }\n  handleInputCancel() {\n    this.hideInputDialog();\n  }\n  handleDelConfirm() {\n    var gid = this.props.group.id;\n    this.props.handleDeleteGroup(gid);\n    this.hideDelDialog();\n  }\n  handleDelCancel() {\n    this.hideDelDialog();\n  }\n  handleGroupItemClick(e) {\n    var gid = this.props.group.id;\n    this.props.handleGroupItemClick(gid);\n    e.stopPropagation();\n  }\n  handleDeleteGroup(e) {\n    this.showDelDialog();\n  }\n  handleRenameGroup(e) {\n    this.showInputDialog();\n    e.stopPropagation();\n  }\n  render() {\n    var opeImgStyles = {};\n    if (!this.props.opeImgVisible) {\n      opeImgStyles.display = 'none';\n    }\n    var group = this.props.group;\n    var gid = group.id;\n    var classes = 'photo-group-item-li';\n    if (gid == this.props.gid) classes += ' photo-group-item-li-current';\n    var imgSrc = '/images/icons/ic_close_black_24dp_2x.png';\n    if (gid < 2) {\n      return (\n        <li className = {classes}>\n          <span className = 'photo-group-item-li-title-span' data-gid = {group.id} onClick = {this.handleGroupItemClick}>{group.name}({group.count})</span>\n        </li>\n      );\n    }\n    return (\n      <li className = {classes}>\n        <span className = 'photo-group-item-li-title-span' onClick = {this.handleGroupItemClick}>{group.name}({group.count})</span>\n        <img className = 'photo-group-item-li-ope-img' src = '/images/icons/ic_mode_edit_black_24dp_2x.png' style = {opeImgStyles} onClick = {this.handleRenameGroup}/>\n        <img className = 'photo-group-item-li-ope-img' src = '/images/icons/ic_close_black_24dp_2x.png' style = {opeImgStyles} onClick = {this.handleDeleteGroup}/>\n        <InputDialog title = '编辑名称' confirm = {this.handleInputConfirm} cancel = {this.handleInputCancel} visible = {this.state.inputVisible}/>\n        <ConfirmDialog title = '确认删除?' confirm = {this.handleDelConfirm} cancel = {this.handleDelCancel} visible = {this.state.delVisible} />\n      </li>\n    );\n  }\n}\n\nclass PhotoGroupBar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      groups: this.props.groups,\n      addVisible: false,\n      opeImgVisible: false\n    }\n    this.handleConfirm = this.handleConfirm.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleGroupItemClick = this.handleGroupItemClick.bind(this);\n    this.showAddDialog = this.showAddDialog.bind(this);\n    this.fetchGroupData = this.fetchGroupData.bind(this);\n    this.toggleOpeImgState = this.toggleOpeImgState.bind(this);\n    this.handleDeleteGroup = this.handleDeleteGroup.bind(this);\n    this.handleRenameGroup = this.handleRenameGroup.bind(this);\n  \n    this.fetchGroupData();\n  }\n\n  showAddDialog() {\n    this.setState({\n      addVisible: true\n    });\n  }\n  \n  fetchGroupData() {\n    var that = this;\n    $.ajax({\n      url: '/admin/datas/photogroup/get',\n      type: 'get',\n      dataType: 'json',\n      success: function(dt) {\n        if (dt.code == 0) {\n          localStorage.setItem('photo_group', JSON.stringify(dt.data));\n          that.setState({\n            groups: dt.data\n          });\n        }\n      }\n    });\n  }\n\n  handleConfirm(groupname) {\n    this.setState({\n      addVisible: false\n    });\n    var that = this;\n    $.ajax({\n      url: '/admin/datas/photogroup/modify',\n      data: {groupname: groupname},\n      type: 'get',\n      dataType: 'json',\n      success: function(dt) {\n        that.fetchGroupData();\n      },\n      error: function() {\n        console.log('error');\n      }\n    });\n  }\n\n  handleCancel() {\n    this.setState({\n      addVisible: false\n    });\n  }\n\n  handleGroupItemClick (gid) {\n    this.props.groupChange(gid);\n  }\n\n  handleDeleteGroup(gid) {\n    console.log('gid: ' + gid);\n    var that = this;\n    $.ajax({\n      url: '/admin/datas/photogroup/remove',\n      data: {gid: gid},\n      type: 'get',\n      dataType: 'json',\n      success: function(dt) {\n        console.log(JSON.stringify(dt));\n        if (dt.code == 0) {\n          if (gid == that.props.gid) {\n            that.props.groupChange(-1);\n          } else {\n            that.fetchGroupData();\n          }\n        }\n      }\n    });\n  }\n\n  handleRenameGroup(gid, name) {\n    var that = this;\n    $.ajax({\n      url: '/admin/datas/photogroup/rename',\n      data: {gid: gid, name: name},\n      type: 'get',\n      dataType: 'json',\n      success: function(dt) {\n        if (dt.code == 0) {\n          that.fetchGroupData();\n        }\n      }\n    })\n  }\n\n  toggleOpeImgState() {\n    this.setState(function(previous, props) {\n      return {\n        opeImgVisible: !previous.opeImgVisible\n      };\n    });\n  }\n\n  render() {\n    var opebarImg = this.state.opeImgVisible ? '/images/icons/ic_cancel_black_24dp_2x.png' :'/images/icons/ic_arrow_drop_down_circle_black_24dp_2x.png';\n    var groupItems = this.state.groups.map((group) => (\n      <PhotoGroupItem group = {group} gid = {this.props.gid} opeImgVisible = {this.state.opeImgVisible} handleGroupItemClick = {this.handleGroupItemClick} handleDeleteGroup = {this.handleDeleteGroup} handleRenameGroup = {this.handleRenameGroup}/>\n    ));\n    var key = new Date().getTime();\n    return (\n      <div id = 'photo-group-div'>\n        <div className = 'photo-group-operation-bar'>\n          <div id = 'add-new-photo-group-div' onClick = {this.showAddDialog}>新建分组</div>\n          <InputDialog title = '新建分组' confirm = {this.handleConfirm} cancel = {this.handleCancel} visible = {this.state.addVisible}/>\n        </div>\n        <div className = 'photo-group-operation-bar'>\n          <div id = 'photo-group-opebar-title-div' >图片组</div>\n          <img id = 'photo-group-opebar-img' src = {opebarImg} onClick = {this.toggleOpeImgState}/>\n        </div>\n        <ul id = 'photo-group-items-ul'>\n          {groupItems}\n        </ul>\n      </div>\n    );\n  }\n}\nclass PhotoArea extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      gid: -1,\n      key: new Date().getTime()\n    }\n    this.handlePhotoGroupChange = this.handlePhotoGroupChange.bind(this);\n    this.handleRefetch = this.handleRefetch.bind(this);\n  }\n  handlePhotoGroupChange(gid) {\n    this.setState({\n      gid: gid,\n      key: new Date().getTime()\n    });\n  }\n  handleRefetch() {\n    this.setState({\n      key: new Date().getTime()\n    });\n  }\n  /**\n   * 原本想把这个函数封进PhotoFlow 中\n   * 但没有找到合适的更新方法\n   * 暂且用 key 来更新\n   * 以后再看一看有没有更好的方法\n   * 现在这个做个记号😊 🔥 \n   * 以示可以在这里拉取数据\n   * 然后作为 PhotoFlow 的 props 传入\n   * 这样封装性不太好\n   */\n  getGroupPhotos() {\n  \n  }\n  render() {\n    var groups = [];\n    return (\n      <div id='photo-div'>\n        <PhotoFlow key = {this.state.key} gid = {this.state.gid} handleRefetch = {this.handleRefetch}/>\n        <PhotoGroupBar key = {this.state.key + 100} gid = {this.state.gid} groups = {groups} groupChange = {this.handlePhotoGroupChange} handleRefetch = {this.handleRefetch}/>\n      </div>\n    );\n  }\n}\nfunction adminPhotosInit() {\n  ReactDOM.render(\n    <PhotoArea />,\n    document.getElementById('photos-target-div')\n  );\n}\n"]}